<app-default-auth-layout
  pageTitle="Bem-vindo(a)!"
  pageSubTitle="Insira o endereço de email da sua conta KelvinBoard para criar uma senha"
  formTitle="Primeiro Acesso"
>
  <form [formGroup]="createPasswordForm" (ngSubmit)="submit()" class="flex flex-col w-full">
    <div class="flex flex-col gap-4">
      <app-base-input
        [isLoading]="isLoading"
        [control]="emailControl"
        formControlName="email"
        label="Email"
        type="email"
        placeholder="Seu endereço de email"
      >
        <i class="ph ph-envelope-simple"></i>
      </app-base-input>

      <app-base-input
        [isLoading]="isLoading"
        [control]="codeControl"
        formControlName="code"
        label="Código"
        type="text"
        placeholder="Seu código de acesso"
      >
        <i class="ph ph-key"></i>


        <p card-2 class="text-xs ml-3 mt-1">
          Código(mock) para testes de acesso:
          <span class="text-red-500 font-bold">123456</span>
        </p>
      </app-base-input>

      <app-base-input
        [isLoading]="isLoading"
        [control]="newPasswordControl"
        formControlName="newPassword"
        label="Senha"
        type="password"
        placeholder="Sua senha"
      >
        <i class="ph ph-password"></i>

        <div card-2 class="h-1 w-[95%] bg-gray-200 rounded mt-2 mx-auto">
          <div
            class="h-1 rounded transition-all duration-300"
            [ngClass]="{
              'bg-red-500 w-1/4': passwordStrengthLevel  === 'weak',
              'bg-yellow-500 w-2/4': passwordStrengthLevel  === 'medium',
              'bg-blue-600 w-3/4': passwordStrengthLevel  === 'strong',
              'bg-green-500 w-full': passwordStrengthLevel  === 'veryStrong',
            }"
          ></div>
        </div>
      </app-base-input>


      <app-base-input
        [isLoading]="isLoading"
        [control]="newPasswordConfirmControl"
        [form]="createPasswordForm"
        formControlName="newPasswordConfirm"
        type="password"
        placeholder="Confirme sua senha"
        class="-mt-3"
      >
        <i class="ph ph-password"></i>
      </app-base-input>
    </div>
    
    <div class="flex flex-col items-center justify-center gap-4 w-full mt-8">
      <app-button
        [isLoading]="isLoading"
        [errorButton]="errorButton"
        [loadingMessage]="'Criando Senha...'"
      >
        Criar Senha
      </app-button>
      <a
        routerLink="/login"
        routerLinkActive="active-page"
        class="text-sm rounded-xl text-secondary hover:text-primary outline-none focus:text-primary focus:underline hover:underline duration-300 ease-in md:flex-row md:gap-1 lg:px-3"
      >
        Já possui uma senha? Faça login.
      </a>
    </div>
  </form>
</app-default-auth-layout>
